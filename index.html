<!DOCTYPE html>
<html>
  <head>
    <title>Plaid Link Page</title>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
  </head>
  <body>
    <button id="link-button">Connect Your Bank</button>

    <script>
      window.onload = function () {
        var linkHandler = Plaid.create({
          token: "link-sandbox-43472585-467c-4e9a-b556-d6faf3e6793e",
          onSuccess: function(public_token, metadata) {
            fetch("https://hooks.zapier.com/hooks/catch/22028118/u2cq71g/", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ public_token: public_token, metadata: metadata })
            });
            alert("Success! You can close this page now.");
          },
          onExit: function(err, metadata) {
            console.log("Plaid Link exited", err, metadata);
          }
        });

        document.getElementById("link-button").onclick = function () {
          linkHandler.open();
        };
      };
    </script>
  </body>
</html>
